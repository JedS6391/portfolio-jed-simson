{% extends "base.html" %}
{% set active_page = "blog" %}

{% block title %}
    <title>Jed Simson &sdot; Blog</title>
{% endblock %}

{% block nav %}
    {% from "nav.html" import nav %}
    {{ nav(active_page) }}
{% endblock %}

{% block content %}
    <div class="row">
        <div id="content" role="main" class="col-md-6 col-md-offset-3">
            <div id="lead">
                <h3 class="display-4 text-xs-center">Blog</h3>
                <nav class="text-xs-center">
                    <ul class="pagination">
                        <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
                            <a class="page-link" href="/blog/page/{{ pagination.page - 1 }}/" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                            <span class="sr-only">Previous</span>
                            </a>
                        </li>

                        {% for page in pagination.iter_pages() %}
                            <li class="page-item {% if page == pagination.page %}active{% endif %}">
                                <a class="page-link" href="/blog/page/{{ page }}/">{{ page }}</a>
                            </li>
                        {% endfor %}


                        <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
                            <a class="page-link" href="/blog/page/{{ pagination.page + 1 }}/" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                            <span class="sr-only">Next</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <div id="posts">
                {% for post in blog_posts %}
                    <section id="blog" class="card">
                        <div class="card-header card-inverse" style="background-color: #333;">
                            <h1 class="card-title">{{ post.title }}</h1>
                            <h6 class="card-subtitle text-muted pull-xs-right">{{ loop.index + skip }} of {{ pagination.total_count }}</h6>
                            <h6 class="card-subtitle text-muted">Posted on {{ post.date.strftime('%a, %d %b %Y') }}</h6>
                        </div>

                        <div class="card-block">
                            {{ post.text | markdown }}
                        </div>
                    </section>
                {% else %}
                    <div class="card card-block text-xs-center">
                        <p class="card-text text-danger">
                            <strong>Sorry, I have not made any blog posts yet!</strong>
                        </p>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script type="text/javascript">
        $(document).ready(function() {
            // Don't allow clicking the disabled pagination links
            $('.pagination > li.disabled > a').click(function() {
                return false;
            });
        });
    </script>
{% endblock %}
